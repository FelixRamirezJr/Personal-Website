<% include templates/nav %>

<div class="row">
  <div class="col m6 push-m3 pull-m3 ">
    <div class="card blue-grey darken-1">
      <form method="post" action="/send_email">
        <div class="card-content white-text">
          <div class="full center" style="width: 100%;">
            <span class="card-title">Please fill out the form below.</span>
            <p> Please provide your information and reason of contacting. </p>
          </div>
          <div class="row">
            <div class="input-field col s6">
              <i class="material-icons prefix">account_circle</i>
              <input id="full_name" type="text" class="validate" required="required">
              <label for="icon_prefix"> Full Name</label>
            </div>
            <div class="input-field col s6">
              <i class="material-icons prefix">email</i>
              <input id="email" type="text" class="validate" required="required">
              <label for="icon_prefix"> Contact Email</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <i class="material-icons prefix">mode_edit</i>
              <textarea id="icon_prefix2" class="materialize-textarea" required="required"></textarea>
              <label for="icon_prefix2">Detailed Description</label>
            </div>
          </div>
          <!-- End Of Form -->
        </div>
        <div class="card-action center">
          <input class="btn" type="submit" value="Submit" id="submit">
        </div>
      </form>
    </div>
  </div>
</div>


<script>
  $(document).ready(function(){
    var message;
    $("#submit").click(function(){
      message = $("#icon_prefix2").val();
      /*
      $.post("http://localhost:3000/send_email",{message: message}, function(data){
        if(data ==='done')
          {
            alert("Send Successful");
          }
      });
      */
      $.ajax({
          type: "POST",
          url: "/send_email",
          data: {info: message},
          success: function(data){
              console.log("The ajax request succeeded!");
              console.log("The result is: ");
              console.dir(data);
          },
          error: function(){
              console.log("The request failed");
          }
      });
    });
  });
</script>
